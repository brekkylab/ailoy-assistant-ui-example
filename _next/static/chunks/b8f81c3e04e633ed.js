(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,74802,(e,t,a)=>{"use strict";function r(e,t,a=!1){return t?Object.keys(e).filter(e=>a?!t.includes(e):t.includes(e)).reduce((t,a)=>(t[a]=e[a],t),{}):{}}function s(e,t,a,r){let s=r&&Object.keys(r).length>0?new URL(Object.values(r)[0],e):new URL(e);return t&&a&&t.forEach(e=>{a[e]&&s.searchParams.set(e,a[e])}),s.toString()}function i(e,t,a,r,i){var n;if(!t)return`<${e}></${e}>`;let o=(null==(n=t.src)?void 0:n.url)?Object.assign(Object.assign({},t),{src:s(t.src.url,t.src.params,r,i)}):t,l=Object.keys(Object.assign(Object.assign({},o),a)).reduce((e,t)=>{let r=null==a?void 0:a[t],s=o[t],i=null!=r?r:s,n=!0===i?t:`${t}="${i}"`;return i?e+` ${n}`:e},"");return`<${e}${l}></${e}>`}Object.defineProperty(a,"__esModule",{value:!0}),a.formatData=a.createHtml=a.formatUrl=void 0,a.formatUrl=s,a.createHtml=i,a.formatData=function(e,t){var a,n,o,l,d;let u=r(t,null==(a=e.scripts)?void 0:a.reduce((e,t)=>[...e,...Array.isArray(t.params)?t.params:[]],[])),c=r(t,null==(o=null==(n=e.html)?void 0:n.attributes.src)?void 0:o.params),h=r(t,[null==(d=null==(l=e.html)?void 0:l.attributes.src)?void 0:d.slugParam]),p=r(t,[...Object.keys(u),...Object.keys(c),...Object.keys(h)],!0);return Object.assign(Object.assign({},e),{html:e.html?i(e.html.element,e.html.attributes,p,c,h):null,scripts:e.scripts?e.scripts.map(e=>Object.assign(Object.assign({},e),{url:s(e.url,e.params,u)})):null})}},65667,(e,t,a)=>{"use strict";var r=e.e&&e.e.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]]);return a},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.GoogleAnalytics=void 0;let i=s(e.r(39744)),n=e.r(74802);a.GoogleAnalytics=e=>{var t=r(e,[]);return(0,n.formatData)(i.default,t)}},11695,(e,t,a)=>{"use strict";var r=e.e&&e.e.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]]);return a},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.GoogleMapsEmbed=void 0;let i=s(e.r(16623)),n=e.r(74802);a.GoogleMapsEmbed=e=>{var t=r(e,[]);return(0,n.formatData)(i.default,t)}},75423,(e,t,a)=>{"use strict";var r=e.e&&e.e.__rest||function(e,t){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)0>t.indexOf(r[s])&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(a[r[s]]=e[r[s]]);return a},s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.YouTubeEmbed=void 0;let i=s(e.r(91903)),n=e.r(74802);a.YouTubeEmbed=e=>{var t=r(e,[]);return(0,n.formatData)(i.default,t)}},34877,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.YouTubeEmbed=a.GoogleMapsEmbed=a.GoogleAnalytics=void 0;var r=e.r(65667);Object.defineProperty(a,"GoogleAnalytics",{enumerable:!0,get:function(){return r.GoogleAnalytics}});var s=e.r(11695);Object.defineProperty(a,"GoogleMapsEmbed",{enumerable:!0,get:function(){return s.GoogleMapsEmbed}});var i=e.r(75423);Object.defineProperty(a,"YouTubeEmbed",{enumerable:!0,get:function(){return i.YouTubeEmbed}})},97853,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function({html:e,height:t=null,width:a=null,children:i,dataNtpc:n=""}){return(0,s.useEffect)(()=>{n&&performance.mark("mark_feature_usage",{detail:{feature:`next-third-parties-${n}`}})},[n]),(0,r.jsxs)(r.Fragment,{children:[i,e?(0,r.jsx)("div",{style:{height:null!=t?`${t}px`:"auto",width:null!=a?`${a}px`:"auto"},"data-ntpc":n,dangerouslySetInnerHTML:{__html:e}}):null]})};let r=e.r(20299),s=e.r(41295)},12189,(e,t,a)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){let{apiKey:t,...a}=e,r={...a,key:t},{html:o}=(0,i.GoogleMapsEmbed)(r);return(0,s.jsx)(n.default,{height:r.height||null,width:r.width||null,html:o,dataNtpc:"GoogleMapsEmbed"})};let s=e.r(20299),i=e.r(34877),n=r(e.r(97853))},95145,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={cancelIdleCallback:function(){return n},requestIdleCallback:function(){return i}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});let i="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},n="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},34389,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return x},handleClientScriptLoad:function(){return g},initScriptLoader:function(){return b}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});let i=e.r(14538),n=e.r(26543),o=e.r(20299),l=i._(e.r(36540)),d=n._(e.r(41295)),u=e.r(38601),c=e.r(76493),h=e.r(95145),p=new Map,m=new Set,f=e=>{let{src:t,id:a,onLoad:r=()=>{},onReady:s=null,dangerouslySetInnerHTML:i,children:n="",strategy:o="afterInteractive",onError:d,stylesheets:u}=e,h=a||t;if(h&&m.has(h))return;if(p.has(t)){m.add(h),p.get(t).then(r,d);return}let f=()=>{s&&s(),m.add(h)},g=document.createElement("script"),b=new Promise((e,t)=>{g.addEventListener("load",function(t){e(),r&&r.call(this,t),f()}),g.addEventListener("error",function(e){t(e)})}).catch(function(e){d&&d(e)});i?(g.innerHTML=i.__html||"",f()):n?(g.textContent="string"==typeof n?n:Array.isArray(n)?n.join(""):"",f()):t&&(g.src=t,p.set(t,b)),(0,c.setAttributesFromProps)(g,e),"worker"===o&&g.setAttribute("type","text/partytown"),g.setAttribute("data-nscript",o),u&&(e=>{if(l.default.preinit)return e.forEach(e=>{l.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let a=document.createElement("link");a.type="text/css",a.rel="stylesheet",a.href=e,t.appendChild(a)})}})(u),document.body.appendChild(g)};function g(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,h.requestIdleCallback)(()=>f(e))}):f(e)}function b(e){e.forEach(g),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");m.add(t)})}function v(e){let{id:t,src:a="",onLoad:r=()=>{},onReady:s=null,strategy:i="afterInteractive",onError:n,stylesheets:c,...p}=e,{updateScripts:g,scripts:b,getIsSsr:v,appDir:x,nonce:y}=(0,d.useContext)(u.HeadManagerContext);y=p.nonce||y;let _=(0,d.useRef)(!1);(0,d.useEffect)(()=>{let e=t||a;_.current||(s&&e&&m.has(e)&&s(),_.current=!0)},[s,t,a]);let w=(0,d.useRef)(!1);if((0,d.useEffect)(()=>{if(!w.current){if("afterInteractive"===i)f(e);else"lazyOnload"===i&&("complete"===document.readyState?(0,h.requestIdleCallback)(()=>f(e)):window.addEventListener("load",()=>{(0,h.requestIdleCallback)(()=>f(e))}));w.current=!0}},[e,i]),("beforeInteractive"===i||"worker"===i)&&(g?(b[i]=(b[i]||[]).concat([{id:t,src:a,onLoad:r,onReady:s,onError:n,...p,nonce:y}]),g(b)):v&&v()?m.add(t||a):v&&!v()&&f({...e,nonce:y})),x){if(c&&c.forEach(e=>{l.default.preinit(e,{as:"style"})}),"beforeInteractive"===i)if(!a)return p.dangerouslySetInnerHTML&&(p.children=p.dangerouslySetInnerHTML.__html,delete p.dangerouslySetInnerHTML),(0,o.jsx)("script",{nonce:y,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([0,{...p,id:t}])})`}});else return l.default.preload(a,p.integrity?{as:"script",integrity:p.integrity,nonce:y,crossOrigin:p.crossOrigin}:{as:"script",nonce:y,crossOrigin:p.crossOrigin}),(0,o.jsx)("script",{nonce:y,dangerouslySetInnerHTML:{__html:`(self.__next_s=self.__next_s||[]).push(${JSON.stringify([a,{...p,id:t}])})`}});"afterInteractive"===i&&a&&l.default.preload(a,p.integrity?{as:"script",integrity:p.integrity,nonce:y,crossOrigin:p.crossOrigin}:{as:"script",nonce:y,crossOrigin:p.crossOrigin})}return null}Object.defineProperty(v,"__nextScript",{value:!0});let x=v;("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},90905,(e,t,a)=>{t.exports=e.r(34389)},3447,(e,t,a)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e){let{html:t,scripts:a,stylesheets:r}=(0,n.YouTubeEmbed)(e);return(0,s.jsx)(o.default,{height:e.height||null,width:e.width||null,html:t,dataNtpc:"YouTubeEmbed",children:null==a?void 0:a.map(e=>(0,s.jsx)(i.default,{src:e.url,strategy:l[e.strategy],stylesheets:r},e.url))})};let s=e.r(20299),i=r(e.r(90905)),n=e.r(34877),o=r(e.r(97853)),l={server:"beforeInteractive",client:"afterInteractive",idle:"lazyOnload",worker:"worker"}},35112,(e,t,a)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.sendGTMEvent=void 0,a.GoogleTagManager=function(e){let{gtmId:t,gtmScriptUrl:a,dataLayerName:r="dataLayer",auth:l,preview:d,dataLayer:u,nonce:c}=e;o=r;let h=new URL(a||"https://www.googletagmanager.com/gtm.js");return t&&h.searchParams.set("id",t),"dataLayer"!==r&&h.searchParams.set("l",r),l&&h.searchParams.set("gtm_auth",l),d&&(h.searchParams.set("gtm_preview",d),h.searchParams.set("gtm_cookies_win","x")),(0,i.useEffect)(()=>{performance.mark("mark_feature_usage",{detail:{feature:"next-third-parties-gtm"}})},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.default,{id:"_next-gtm-init",dangerouslySetInnerHTML:{__html:`
      (function(w,l){
        w[l]=w[l]||[];
        w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
        ${u?`w[l].push(${JSON.stringify(u)})`:""}
      })(window,'${r}');`},nonce:c}),(0,s.jsx)(n.default,{id:"_next-gtm","data-ntpc":"GTM",src:h.href,nonce:c})]})};let s=e.r(20299),i=e.r(41295),n=r(e.r(90905)),o="dataLayer";a.sendGTMEvent=(e,t)=>{let a=t||o;window[a]=window[a]||[],window[a].push(e)}},91633,(e,t,a)=>{"use strict";let r;var s=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.GoogleAnalytics=function(e){let{gaId:t,debugMode:a,dataLayerName:s="dataLayer",nonce:l}=e;return void 0===r&&(r=s),(0,n.useEffect)(()=>{performance.mark("mark_feature_usage",{detail:{feature:"next-third-parties-ga"}})},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.default,{id:"_next-ga-init",dangerouslySetInnerHTML:{__html:`
          window['${s}'] = window['${s}'] || [];
          function gtag(){window['${s}'].push(arguments);}
          gtag('js', new Date());

          gtag('config', '${t}' ${a?",{ 'debug_mode': true }":""});`},nonce:l}),(0,i.jsx)(o.default,{id:"_next-ga",src:`https://www.googletagmanager.com/gtag/js?id=${t}`,nonce:l})]})},a.sendGAEvent=function(){void 0===r?console.warn("@next/third-parties: GA has not been initialized"):window[r]?window[r].push(arguments):console.warn(`@next/third-parties: GA dataLayer ${r} does not exist`)};let i=e.r(20299),n=e.r(41295),o=s(e.r(90905))},42208,(e,t,a)=>{"use strict";var r=e.e&&e.e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(a,"__esModule",{value:!0}),a.sendGAEvent=a.GoogleAnalytics=a.sendGTMEvent=a.GoogleTagManager=a.YouTubeEmbed=a.GoogleMapsEmbed=void 0;var s=e.r(12189);Object.defineProperty(a,"GoogleMapsEmbed",{enumerable:!0,get:function(){return r(s).default}});var i=e.r(3447);Object.defineProperty(a,"YouTubeEmbed",{enumerable:!0,get:function(){return r(i).default}});var n=e.r(35112);Object.defineProperty(a,"GoogleTagManager",{enumerable:!0,get:function(){return n.GoogleTagManager}}),Object.defineProperty(a,"sendGTMEvent",{enumerable:!0,get:function(){return n.sendGTMEvent}});var o=e.r(91633);Object.defineProperty(a,"GoogleAnalytics",{enumerable:!0,get:function(){return o.GoogleAnalytics}}),Object.defineProperty(a,"sendGAEvent",{enumerable:!0,get:function(){return o.sendGAEvent}})},84859,e=>{e.v({className:"geist_a71539c9-module__T19VSG__className",variable:"geist_a71539c9-module__T19VSG__variable"})},94739,e=>{"use strict";var t=e.i(84859);let a={className:t.default.className,style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"}};null!=t.default.variable&&(a.variable=t.default.variable),e.s(["default",0,a])},21554,e=>{e.v({className:"geist_mono_8d43a2aa-module__8Li5zG__className",variable:"geist_mono_8d43a2aa-module__8Li5zG__variable"})},46092,e=>{"use strict";var t=e.i(21554);let a={className:t.default.className,style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"}};null!=t.default.variable&&(a.variable=t.default.variable),e.s(["default",0,a])},67530,e=>{"use strict";var t=e.i(41295),a=e.i(32704),r=e.i(81089),s=e.i(19189),i=e.i(83220),n=e.i(54096),o=e.i(22833),l=e.i(43254),d=e=>{let[,t]=(0,l.tapState)(e.getState);return(0,s.tapEffect)(()=>(t(e.getState()),e.subscribe(()=>{t(e.getState())})),[e]),e.getState()},u=e.i(28703),c=(0,r.resource)(({runtime:e})=>{let t=d(e),a=(0,u.tapEvents)();return(0,s.tapEffect)(()=>{let t=[];for(let r of["switched-to","switched-away"]){let s=e.unstable_on(r,()=>{a.emit(`thread-list-item.${r}`,{threadId:e.getState().id})});t.push(s)}return()=>{for(let e of t)e()}},[e,a]),(0,n.tapApi)({getState:()=>t,switchTo:e.switchTo,rename:e.rename,archive:e.archive,unarchive:e.unarchive,delete:e.delete,generateTitle:e.generateTitle,initialize:e.initialize,detach:e.detach,__internal_getRuntime:()=>e},{key:t.id})}),h=e.i(17435),p=e=>{let t=(0,h.tapResources)(e);return{state:t.map(e=>e.state),api:e=>{let a="index"in e?t[e.index]?.api:t.find(t=>t.key===e.key)?.api;if(!a)throw Error(`tapLookupResources: Resource not found for lookup: ${JSON.stringify(e)}`);return a}}},m=(0,r.resource)(({runtime:e})=>{let t=d(e);return(0,n.tapApi)({getState:()=>t,remove:e.remove,__internal_getRuntime:()=>e},{key:t.id})}),f=(0,r.resource)(({runtime:e,index:t})=>{let a=(0,o.tapMemo)(()=>e.getAttachmentByIndex(t),[e,t]);return(0,i.tapInlineResource)(m({runtime:a}))}),g=(0,r.resource)(({threadIdRef:e,messageIdRef:t,runtime:a})=>{let r=d(a),i=(0,u.tapEvents)();(0,s.tapEffect)(()=>{let r=[];for(let s of["send","attachment-add"]){let n=a.unstable_on(s,()=>{i.emit(`composer.${s}`,{threadId:e.current,...t&&{messageId:t.current}})});r.push(n)}return()=>{for(let e of r)e()}},[a,i,e,t]);let l=p(r.attachments.map((e,t)=>f({runtime:a,index:t},{key:t}))),c=(0,o.tapMemo)(()=>({text:r.text,role:r.role,attachments:l.state,runConfig:r.runConfig,isEditing:r.isEditing,canCancel:r.canCancel,attachmentAccept:r.attachmentAccept,isEmpty:r.isEmpty,type:r.type??"thread"}),[r,l.state]);return(0,n.tapApi)({getState:()=>c,setText:a.setText,setRole:a.setRole,setRunConfig:a.setRunConfig,addAttachment:a.addAttachment,reset:a.reset,clearAttachments:a.clearAttachments,send:a.send,cancel:a.cancel,beginEdit:a.beginEdit??(()=>{throw Error("beginEdit is not supported in this runtime")}),attachment:e=>"id"in e?l.api({key:e.id}):l.api(e),__internal_getRuntime:()=>a})}),b=(0,r.resource)(({runtime:e})=>{let t=d(e);return(0,n.tapApi)({getState:()=>t,addToolResult:t=>e.addToolResult(t),resumeToolCall:t=>e.resumeToolCall(t),__internal_getRuntime:()=>e},{key:"tool-call"===t.type?"toolCallId-"+t.toolCallId:void 0})}),v=(0,r.resource)(({runtime:e,index:t})=>{let a=(0,o.tapMemo)(()=>e.getAttachmentByIndex(t),[e,t]);return(0,i.tapInlineResource)(m({runtime:a}))}),x=(0,r.resource)(({runtime:e,index:t})=>{let a=(0,o.tapMemo)(()=>e.getMessagePartByIndex(t),[e,t]);return(0,i.tapInlineResource)(b({runtime:a}))}),y=(0,r.resource)(({runtime:e,threadIdRef:t})=>{let a=d(e),[r,s]=(0,l.tapState)(!1),[u,c]=(0,l.tapState)(!1),h=(0,o.tapMemo)(()=>({get current(){return e.getState().id}}),[e]),m=(0,i.tapInlineResource)(g({runtime:e.composer,threadIdRef:t,messageIdRef:h})),f=p(a.content.map((t,a)=>x({runtime:e,index:a},{key:a}))),b=p(a.attachments?.map((t,a)=>v({runtime:e,index:a},{key:a}))??[]),y=(0,o.tapMemo)(()=>({...a,parts:f.state,composer:m.state,isCopied:r,isHovering:u}),[a,f.state,m.state,r,u]);return(0,n.tapApi)({getState:()=>y,composer:m.api,reload:t=>e.reload(t),speak:()=>e.speak(),stopSpeaking:()=>e.stopSpeaking(),submitFeedback:t=>e.submitFeedback(t),switchToBranch:t=>e.switchToBranch(t),getCopyText:()=>e.unstable_getCopyText(),part:e=>"index"in e?f.api({index:e.index}):f.api({key:"toolCallId-"+e.toolCallId}),attachment:e=>"id"in e?b.api({key:e.id}):b.api(e),setIsCopied:s,setIsHovering:c,__internal_getRuntime:()=>e},{key:a.id})}),_=(0,r.resource)(({runtime:e,id:t,threadIdRef:a})=>{let r=(0,o.tapMemo)(()=>e.getMessageById(t),[e,t]);return(0,i.tapInlineResource)(y({runtime:r,threadIdRef:a}))}),w=(0,r.resource)(({runtime:e})=>{let t=d(e),a=(0,u.tapEvents)();(0,s.tapEffect)(()=>{let t=[];for(let r of["run-start","run-end","initialize","model-context-update"]){let s=e.unstable_on(r,()=>{let t=e.getState()?.threadId||"unknown";a.emit(`thread.${r}`,{threadId:t})});t.push(s)}return()=>{for(let e of t)e()}},[e]);let r=(0,o.tapMemo)(()=>({get current(){return e.getState().threadId}}),[e]),l=(0,i.tapInlineResource)(g({runtime:e.composer,threadIdRef:r})),c=p(t.messages.map(t=>_({runtime:e,id:t.id,threadIdRef:r},{key:t.id}))),h=(0,o.tapMemo)(()=>({isDisabled:t.isDisabled,isLoading:t.isLoading,isRunning:t.isRunning,capabilities:t.capabilities,state:t.state,suggestions:t.suggestions,extras:t.extras,speech:t.speech,composer:l.state,messages:c.state}),[t,c,l.state]);return(0,n.tapApi)({getState:()=>h,composer:l.api,append:e.append,startRun:e.startRun,unstable_resumeRun:e.unstable_resumeRun,cancelRun:e.cancelRun,getModelContext:e.getModelContext,export:e.export,import:e.import,reset:e.reset,stopSpeaking:e.stopSpeaking,startVoice:async()=>{throw Error("startVoice is not supported in this runtime")},stopVoice:async()=>{throw Error("stopVoice is not supported in this runtime")},message:e=>"id"in e?c.api({key:e.id}):c.api(e),__internal_getRuntime:()=>e})}),j=(0,r.resource)(({runtime:e,id:t})=>{let a=(0,o.tapMemo)(()=>e.getItemById(t),[e,t]);return(0,i.tapInlineResource)(c({runtime:a}))}),T=(0,r.resource)(({runtime:e,__internal_assistantRuntime:t})=>{let a=d(e),r=(0,i.tapInlineResource)(w({runtime:e.main})),s=p(Object.keys(a.threadItems).map(t=>j({runtime:e,id:t},{key:t}))),l=(0,o.tapMemo)(()=>({mainThreadId:a.mainThreadId,newThreadId:a.newThread??null,isLoading:a.isLoading,threadIds:a.threads,archivedThreadIds:a.archivedThreads,threadItems:s.state,main:r.state}),[a,s.state,r.state]);return(0,n.tapApi)({getState:()=>l,thread:()=>r.api,item:e=>{if("main"===e)return s.api({key:l.mainThreadId});if("id"in e)return s.api({key:e.id});let{index:t,archived:a=!1}=e,r=a?l.archivedThreadIds[t]:l.threadIds[t];return s.api({key:r})},switchToThread:t=>{e.switchToThread(t)},switchToNewThread:()=>{e.switchToNewThread()},__internal_getAssistantRuntime:()=>t})}),M=e.i(5347),S=(0,r.resource)(e=>{let t=(0,M.tapModelContext)();return(0,s.tapEffect)(()=>e.registerModelContextProvider(t),[e,t]),(0,i.tapInlineResource)(T({runtime:e.threads,__internal_assistantRuntime:e}))}),I=e.i(20299),E=(0,t.memo)(({children:e,runtime:t})=>{let r=(0,a.useAssistantApi)({threads:S(t)}),s=t._core?.RenderComponent;return(0,I.jsxs)(a.AssistantProvider,{api:r,children:[s&&(0,I.jsx)(s,{}),e]})});e.s(["AssistantRuntimeProvider",()=>E],67530)},79269,e=>{"use strict";function t(e,t){if("*"===t)return!0;let a=t.split(",").map(e=>e.trim().toLowerCase()),r="."+e.name.split(".").pop().toLowerCase(),s=e.type.toLowerCase();for(let e of a){if(e.startsWith(".")&&e===r||e.includes("/")&&e===s)return!0;if(("image/*"===e||"video/*"===e||"audio/*"===e)&&e.endsWith("/*")){let t=e.split("/")[0];if(s.startsWith(t+"/"))return!0}}return!1}var a=class{_adapters;accept;constructor(e){this._adapters=e;const t=e.findIndex(e=>"*"===e.accept);if(-1!==t){if(t!==e.length-1)throw Error("A wildcard adapter (handling all files) can only be specified as the last adapter.");this.accept="*"}else this.accept=e.map(e=>e.accept).join(",")}add(e){for(let a of this._adapters)if(t(e.file,a.accept))return a.add(e);throw Error("No matching adapter found for file")}async send(e){for(let a of this._adapters.slice())if(t(e.file,a.accept))return a.send(e);throw Error("No matching adapter found for attachment")}async remove(e){for(let a of this._adapters.slice())if(t({name:e.name,type:e.contentType},a.accept))return a.remove(e);throw Error("No matching adapter found for attachment")}};e.s(["CompositeAttachmentAdapter",()=>a])},42571,e=>{"use strict";var t=class{accept="image/*";async add(e){return{id:e.file.name,type:"image",name:e.file.name,contentType:e.file.type,file:e.file,status:{type:"requires-action",reason:"composer-send"}}}async send(e){return{...e,status:{type:"complete"},content:[{type:"image",image:await a(e.file)}]}}async remove(){}},a=e=>new Promise((t,a)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=e=>a(e),r.readAsDataURL(e)});e.s(["SimpleImageAttachmentAdapter",()=>t])},64001,e=>{"use strict";var t=class{accept="text/plain,text/html,text/markdown,text/csv,text/xml,text/json,text/css";async add(e){return{id:e.file.name,type:"document",name:e.file.name,contentType:e.file.type,file:e.file,status:{type:"requires-action",reason:"composer-send"}}}async send(e){return{...e,status:{type:"complete"},content:[{type:"text",text:`<attachment name=${e.name}>
${await a(e.file)}
</attachment>`}]}}async remove(){}},a=e=>new Promise((t,a)=>{let r=new FileReader;r.onload=()=>t(r.result),r.onerror=e=>a(e),r.readAsText(e)});e.s(["SimpleTextAttachmentAdapter",()=>t])},64589,e=>{"use strict";var t=class{cache=new WeakMap;convertMessages(e,t){return e.map((e,a)=>{let r=t(this.cache.get(e),e,a);return this.cache.set(e,r),r})}};e.s(["ThreadMessageConverter",()=>t])},1673,e=>{"use strict";var t=e.i(41295),a=e.i(64589),r=e.i(79166),s=e.i(23789),i=e.i(35498),n=({callback:e,messages:n,isRunning:l,joinStrategy:d,metadata:u})=>{let c=(0,t.useMemo)(()=>({metadata:u??{},callback:e,callbackCache:new WeakMap,chunkCache:new WeakMap,converterCache:new a.ThreadMessageConverter}),[e,u]);return(0,t.useMemo)(()=>{let e=[];for(let t of n){let a=c.callbackCache.get(t);if(!a){let e=c.callback(t,c.metadata);a={input:t,outputs:Array.isArray(e)?e:[e]},c.callbackCache.set(t,a)}e.push(a)}let t=((e,t)=>{let a=[],r=!1,s=!1,i=[],n=[],o=()=>{n.length&&a.push({inputs:i,outputs:n}),i=[],n=[],r=!1,s=!1};for(let a of e)for(let e of a.outputs)(s&&"tool"!==e.role||!r||"user"===e.role||"system"===e.role)&&o(),r="assistant"===e.role||"tool"===e.role,i.at(-1)!==a.input&&i.push(a.input),n.push(e),"assistant"===e.role&&(e.convertConfig?.joinStrategy==="none"||"none"===t)&&(s=!0);return o(),a})(e,d).map(e=>{let t=e.outputs[0];if(!t)return e;let a=c.chunkCache.get(t);return a&&o(a.outputs,e.outputs)?a:(c.chunkCache.set(t,e),e)}),a=c.converterCache.convertMessages(t,(e,a,n)=>{let d=n===t.length-1,u=(e=>{let t={role:"assistant",content:[]};for(let a of e)if("tool"===a.role){let e=t.content.findIndex(e=>"tool-call"===e.type&&e.toolCallId===a.toolCallId);if(-1!==e){let s=t.content[e];if(void 0!==a.toolName&&s.toolName!==a.toolName)throw Error(`Tool call name ${a.toolCallId} ${a.toolName} does not match existing tool call ${s.toolName}`);t.content[e]={...s,...{[r.symbolInnerMessage]:[...s[r.symbolInnerMessage]??[],a]},result:a.result,artifact:a.artifact,isError:a.isError,messages:a.messages}}else throw Error(`Tool call ${a.toolCallId} ${a.toolName} not found in assistant message`)}else{let e=a.role,s=("string"==typeof a.content?[{type:"text",text:a.content}]:a.content).map(e=>({...e,...{[r.symbolInnerMessage]:[a]}}));switch(e){case"system":case"user":return{...a,content:s};case"assistant":0===t.content.length&&(t.id=a.id,t.createdAt??=a.createdAt,t.status??=a.status,a.attachments&&(t.attachments=[...t.attachments??[],...a.attachments]),a.metadata&&(t.metadata??={},a.metadata.unstable_state&&(t.metadata.unstable_state=a.metadata.unstable_state),a.metadata.unstable_annotations&&(t.metadata.unstable_annotations=[...t.metadata.unstable_annotations??[],...a.metadata.unstable_annotations]),a.metadata.unstable_data&&(t.metadata.unstable_data=[...t.metadata.unstable_data??[],...a.metadata.unstable_data]),a.metadata.steps&&(t.metadata.steps=[...t.metadata.steps??[],...a.metadata.steps]),a.metadata.custom&&(t.metadata.custom={...t.metadata.custom??{},...a.metadata.custom}),a.metadata.submittedFeedback&&(t.metadata.submittedFeedback=a.metadata.submittedFeedback))),t.content.push(...s);break;default:throw Error(`Unknown message role: ${e}`)}}return t})(a.outputs),h="object"==typeof u.content&&u.content.some(e=>"tool-call"===e.type&&void 0===e.result),p="object"==typeof u.content&&u.content.some(e=>"tool-call"===e.type&&void 0===e.result),m=(0,i.getAutoStatus)(d,l,h,p,d?c.metadata.error:void 0);if(e&&("assistant"!==e.role||!(0,i.isAutoStatus)(e.status)||e.status===m)&&o((0,r.getExternalStoreMessages)(e),a.inputs))return e;let f=(0,s.fromThreadMessageLike)(u,n.toString(),m);return f[r.symbolInnerMessage]=a.inputs,f});return a[r.symbolInnerMessage]=n,a},[c,n,l,d])},o=(e,t)=>{if(e.length!==t.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0};e.s(["useExternalMessageConverter",()=>n])},75939,e=>{"use strict";var t=e.i(41295),a=e.i(38201),r=Object.freeze([]),s="DEFAULT_THREAD_ID",i=Object.freeze([s]),n=Object.freeze({id:s,remoteId:void 0,externalId:void 0,status:"regular"}),o=Promise.resolve(),l=Object.freeze({[s]:n}),d=class{constructor(e={},t){this.adapter=e,this.threadFactory=t,this._mainThread=this.threadFactory(),this.__internal_setAdapter(e,!0)}_mainThreadId=s;_threads=i;_archivedThreads=r;_threadData=l;get isLoading(){return this.adapter.isLoading??!1}get newThreadId(){}get threadIds(){return this._threads}get archivedThreadIds(){return this._archivedThreads}get threadData(){return this._threadData}getLoadThreadsPromise(){return o}_mainThread;get mainThreadId(){return this._mainThreadId}getMainThreadRuntimeCore(){return this._mainThread}getThreadRuntimeCore(){throw Error("Method not implemented.")}getItemById(e){for(let t of this.adapter.threads??[])if(t.id===e)return t;for(let t of this.adapter.archivedThreads??[])if(t.id===e)return t;if(e===s)return n}__internal_setAdapter(e,t=!1){let a=this.adapter;this.adapter=e;let i=e.threadId??s,n=e.threads??r,o=e.archivedThreads??r,d=a.threadId??s,u=a.threads??r,c=a.archivedThreads??r;(t||d!==i||u!==n||c!==o)&&(this._threadData={...l,...Object.fromEntries(e.threads?.map(e=>[e.id,{...e,remoteId:e.remoteId,externalId:e.externalId,status:"regular"}])??[]),...Object.fromEntries(e.archivedThreads?.map(e=>[e.id,{...e,remoteId:e.remoteId,externalId:e.externalId,status:"archived"}])??[])},u!==n&&(this._threads=this.adapter.threads?.map(e=>e.id)??r),c!==o&&(this._archivedThreads=this.adapter.archivedThreads?.map(e=>e.id)??r),d!==i&&(this._mainThreadId=i,this._mainThread=this.threadFactory()),this._notifySubscribers())}async switchToThread(e){if(this._mainThreadId===e)return;let t=this.adapter.onSwitchToThread;if(!t)throw Error("External store adapter does not support switching to thread");t(e)}async switchToNewThread(){let e=this.adapter.onSwitchToNewThread;if(!e)throw Error("External store adapter does not support switching to new thread");e()}async rename(e,t){let a=this.adapter.onRename;if(!a)throw Error("External store adapter does not support renaming");a(e,t)}async detach(){}async archive(e){let t=this.adapter.onArchive;if(!t)throw Error("External store adapter does not support archiving");t(e)}async unarchive(e){let t=this.adapter.onUnarchive;if(!t)throw Error("External store adapter does not support unarchiving");t(e)}async delete(e){let t=this.adapter.onDelete;if(!t)throw Error("External store adapter does not support deleting");t(e)}initialize(e){return Promise.resolve({remoteId:e,externalId:void 0})}generateTitle(){throw Error("Method not implemented.")}_subscriptions=new Set;subscribe(e){return this._subscriptions.add(e),()=>this._subscriptions.delete(e)}_notifySubscribers(){for(let e of this._subscriptions)e()}},u=e.i(79166),c=e.i(64589),h=e.i(35498),p=e.i(23789),m=e.i(2631),f=e.i(12164),g=e.i(31609),b=e.i(13931),v=class extends b.BaseComposerRuntimeCore{constructor(e,t,{parentId:a,message:r}){super(),this.runtime=e,this.endEditCallback=t,this._parentId=a,this._sourceId=r.id,this._previousText=(0,m.getThreadMessageText)(r),this.setText(this._previousText),this.setRole(r.role),this.setAttachments(r.attachments??[]),this._nonTextParts=r.content.filter(e=>"text"!==e.type),this.setRunConfig({...e.composer.runConfig})}get canCancel(){return!0}getAttachmentAdapter(){return this.runtime.adapters?.attachments}_nonTextParts;_previousText;_parentId;_sourceId;async handleSend(e){(0,m.getThreadMessageText)(e)!==this._previousText&&this.runtime.append({...e,content:[...e.content,...this._nonTextParts],parentId:this._parentId,sourceId:this._sourceId}),this.handleCancel()}handleCancel(){this.endEditCallback(),this._notifySubscribers()}},x=class{constructor(e){this._contextProvider=e}_subscriptions=new Set;_isInitialized=!1;repository=new f.MessageRepository;get messages(){return this.repository.getMessages()}get state(){let e;for(let t of this.messages)if("assistant"===t.role){e=t;break}return e?.metadata.unstable_state??null}composer=new g.DefaultThreadComposerRuntimeCore(this);getModelContext(){return this._contextProvider.getModelContext()}_editComposers=new Map;getEditComposer(e){return this._editComposers.get(e)}beginEdit(e){if(this._editComposers.has(e))throw Error("Edit already in progress");this._editComposers.set(e,new v(this,()=>this._editComposers.delete(e),this.repository.getMessage(e))),this._notifySubscribers()}getMessageById(e){try{return this.repository.getMessage(e)}catch{return}}getBranches(e){return this.repository.getBranches(e)}switchToBranch(e){this.repository.switchToBranch(e),this._notifySubscribers()}_notifySubscribers(){for(let e of this._subscriptions)e()}_notifyEventSubscribers(e){let t=this._eventSubscribers.get(e);if(t)for(let e of t)e()}subscribe(e){return this._subscriptions.add(e),()=>this._subscriptions.delete(e)}submitFeedback({messageId:e,type:t}){let a=this.adapters?.feedback;if(!a)throw Error("Feedback adapter not configured");let{message:r,parentId:s}=this.repository.getMessage(e);if(a.submit({message:r,type:t}),"assistant"===r.role){let e={...r,metadata:{...r.metadata,submittedFeedback:{type:t}}};this.repository.addOrUpdateMessage(s,e)}this._notifySubscribers()}_stopSpeaking;speech;speak(e){let t=this.adapters?.speech;if(!t)throw Error("Speech adapter not configured");let{message:a}=this.repository.getMessage(e);this._stopSpeaking?.();let r=t.speak((0,m.getThreadMessageText)(a)),s=r.subscribe(()=>{"ended"===r.status.type?(this._stopSpeaking=void 0,this.speech=void 0):this.speech={messageId:e,status:r.status},this._notifySubscribers()});this.speech={messageId:e,status:r.status},this._notifySubscribers(),this._stopSpeaking=()=>{r.cancel(),s(),this.speech=void 0,this._stopSpeaking=void 0}}stopSpeaking(){if(!this._stopSpeaking)throw Error("No message is being spoken");this._stopSpeaking(),this._notifySubscribers()}ensureInitialized(){this._isInitialized||(this._isInitialized=!0,this._notifyEventSubscribers("initialize"))}export(){return this.repository.export()}import(e){this.ensureInitialized(),this.repository.clear(),this.repository.import(e),this._notifySubscribers()}reset(e){this.import(f.ExportedMessageRepository.fromArray(e??[]))}_eventSubscribers=new Map;unstable_on(e,t){if("model-context-update"===e)return this._contextProvider.subscribe?.(t)??(()=>{});let a=this._eventSubscribers.get(e);return a?a.add(t):this._eventSubscribers.set(e,new Set([t])),()=>{this._eventSubscribers.get(e).delete(t)}}},y=Object.freeze([]),_=class extends x{_assistantOptimisticId=null;_capabilities={switchToBranch:!1,switchBranchDuringRun:!1,edit:!1,reload:!1,cancel:!1,unstable_copy:!1,speech:!1,attachments:!1,feedback:!1};get capabilities(){return this._capabilities}_messages;isDisabled;get isLoading(){return this._store.isLoading??!1}get messages(){return this._messages}get state(){return this._store.state??super.state}get adapters(){return this._store.adapters}suggestions=[];extras=void 0;_converter=new c.ThreadMessageConverter;_store;beginEdit(e){if(!this._store.onEdit)throw Error("Runtime does not support editing.");super.beginEdit(e)}constructor(e,t){super(e),this.__internal_setAdapter(t)}__internal_setAdapter(e){let t,a;if(this._store===e)return;let r=e.isRunning??!1;this.isDisabled=e.isDisabled??!1;let s=this._store;if(this._store=e,this.extras=e.extras,this.suggestions=e.suggestions??y,this._capabilities={switchToBranch:void 0!==this._store.setMessages,switchBranchDuringRun:!1,edit:void 0!==this._store.onEdit,reload:void 0!==this._store.onReload,cancel:void 0!==this._store.onCancel,speech:this._store.adapters?.speech!==void 0,unstable_copy:this._store.unstable_capabilities?.copy!==!1,attachments:!!this._store.adapters?.attachments,feedback:!!this._store.adapters?.feedback},e.messageRepository){if(s&&s.isRunning===e.isRunning&&s.messageRepository===e.messageRepository)return void this._notifySubscribers();this.repository.clear(),this._assistantOptimisticId=null,this.repository.import(e.messageRepository),t=this.repository.getMessages()}else if(e.messages){if(s){if(s.convertMessage!==e.convertMessage)this._converter=new c.ThreadMessageConverter;else if(s.isRunning===e.isRunning&&s.messages===e.messages)return void this._notifySubscribers()}t=e.convertMessage?this._converter.convertMessages(e.messages,(t,a,s)=>{if(!e.convertMessage)return a;let i=s===e.messages.length-1,n=(0,h.getAutoStatus)(i,r,!1,!1,void 0);if(t&&("assistant"!==t.role||!(0,h.isAutoStatus)(t.status)||t.status===n))return t;let o=e.convertMessage(a,s),l=(0,p.fromThreadMessageLike)(o,s.toString(),n);return l[u.symbolInnerMessage]=a,l}):e.messages;for(let e=0;e<t.length;e++){let a=t[e],r=t[e-1];this.repository.addOrUpdateMessage(r?.id??null,a)}}else throw Error("ExternalStoreAdapter must provide either 'messages' or 'messageRepository'");t.length>0&&this.ensureInitialized(),(s?.isRunning??!1)!==(e.isRunning??!1)&&(e.isRunning?this._notifyEventSubscribers("run-start"):this._notifyEventSubscribers("run-end")),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null),a=t,r&&a[a.length-1]?.role!=="assistant"&&(this._assistantOptimisticId=this.repository.appendOptimisticMessage(t.at(-1)?.id??null,{role:"assistant",content:[]})),this.repository.resetHead(this._assistantOptimisticId??t.at(-1)?.id??null),this._messages=this.repository.getMessages(),this._notifySubscribers()}switchToBranch(e){if(!this._store.setMessages)throw Error("Runtime does not support switching branches.");this._store.isRunning||(this.repository.switchToBranch(e),this.updateMessages(this.repository.getMessages()))}async append(e){if(e.parentId!==(this.messages.at(-1)?.id??null)){if(!this._store.onEdit)throw Error("Runtime does not support editing messages.");await this._store.onEdit(e)}else await this._store.onNew(e)}async startRun(e){if(!this._store.onReload)throw Error("Runtime does not support reloading messages.");await this._store.onReload(e.parentId,e)}async resumeRun(e){if(!this._store.onResume)throw Error("Runtime does not support resuming runs.");await this._store.onResume(e)}unstable_loadExternalState(e){if(!this._store.onLoadExternalState)throw Error("Runtime does not support importing states.");this._store.onLoadExternalState(e)}cancelRun(){if(!this._store.onCancel)throw Error("Runtime does not support cancelling runs.");this._store.onCancel(),this._assistantOptimisticId&&(this.repository.deleteMessage(this._assistantOptimisticId),this._assistantOptimisticId=null);let e=this.repository.getMessages(),t=e[e.length-1];t?.role==="user"&&t.id===e.at(-1)?.id?(this.repository.deleteMessage(t.id),this.composer.text.trim()||this.composer.setText((0,m.getThreadMessageText)(t)),e=this.repository.getMessages()):this._notifySubscribers(),setTimeout(()=>{this.updateMessages(e)},0)}addToolResult(e){if(!this._store.onAddToolResult&&!this._store.onAddToolResult)throw Error("Runtime does not support tool results.");this._store.onAddToolResult?.(e)}resumeToolCall(e){if(!this._store.onResumeToolCall)throw Error("Runtime does not support resuming tool calls.");this._store.onResumeToolCall(e)}reset(e){let t=new f.MessageRepository;t.import(f.ExportedMessageRepository.fromArray(e??[])),this.updateMessages(t.getMessages())}import(e){this._assistantOptimisticId=null,super.import(e),this._store.onImport&&this._store.onImport(this.repository.getMessages())}updateMessages=e=>{void 0!==this._store.convertMessage?this._store.setMessages?.(e.flatMap(u.getExternalStoreMessage).filter(e=>null!=e)):this._store.setMessages?.(e)}},w=e=>e.adapters?.threadList??{},j=class extends a.BaseAssistantRuntimeCore{threads;constructor(e){super(),this.threads=new d(w(e),()=>new _(this._contextProvider,e))}setAdapter(e){this.threads.__internal_setAdapter(w(e)),this.threads.getMainThreadRuntimeCore().__internal_setAdapter(e)}},T=e.i(75704);e.i(20299);var M=(0,t.createContext)(null),S=e=>{let[a]=(0,t.useState)(()=>new j(e));(0,t.useEffect)(()=>{a.setAdapter(e)});let{modelContext:r}=(0,t.useContext)(M)??{};return(0,t.useEffect)(()=>{if(r)return a.registerModelContextProvider(r)},[r,a]),(0,t.useMemo)(()=>new T.AssistantRuntimeImpl(a),[a])};e.s(["useExternalStoreRuntime",()=>S],75939)},77536,e=>{"use strict";function t(e){switch(e.type){case"text":return{type:"text",text:e.text};case"value":return{type:"text",text:e.value?.toString()??""};case"image":{let a;if("binary"===e.image.type){var t;let r,s;t=e.image.data,r="",t.forEach(e=>{r+=String.fromCharCode(e)}),s=btoa(r),a=`data:image/png;base64,${s}`}else a=e.image.url;return{type:"image",image:a}}case"function":{let t={type:"tool-call",toolCallId:e.id,toolName:e.function.name};return"string"==typeof e.function.arguments?t.argsText=e.function.arguments:"object"==typeof e.function.arguments&&(t.args=e.function.arguments),t}}}function a(e){switch(e.role){case"system":return{role:"system",content:e.contents.map(e=>t(e))};case"user":return{role:"user",content:e.contents.map(e=>t(e))};case"assistant":{let a=[];return e.thinking&&a.push({type:"reasoning",text:e.thinking}),a=[...a,...e.contents.map(e=>t(e))],e.tool_calls&&e.tool_calls.length>0&&(a=[...a,...e.tool_calls.map(e=>t(e))]),{role:"assistant",content:a}}case"tool":{let t,a=e.contents[0];return t="text"===a.type?a.text:"value"===a.type?JSON.stringify(a.value):"",{role:"tool",toolCallId:e.id,result:t}}}}function r(e){switch(e.type){case"text":return{type:"text",text:e.text};case"value":return{type:"text",text:e.value?.toString()??""};case"function":if("verbatim"===e.function.type)return{type:"text",text:e.function.text};if("with_string_args"===e.function.type);return{type:"text",text:`{"name": "${e.function.name}", "arguments": ${e.function.arguments}}`};case"null":return{type:"text",text:""}}}function s(e){switch(e.role){case"assistant":{let t=[];return e.thinking&&t.push({type:"reasoning",text:e.thinking}),t=[...t,...e.contents.map(e=>r(e))],e.tool_calls.length>0&&(t=[...t,...e.tool_calls.map(e=>r(e))]),{role:"assistant",content:t}}case"tool":{let t=r(e.contents[0]).text;return{role:"tool",toolCallId:e.id,result:t}}default:return{role:"assistant",content:[]}}}function i(e){let t=[];for(let a of e){if("tool"===a.role)continue;let e=[];for(let t of a.content)if("string"==typeof t)e.push({type:"text",text:t});else if("text"===t.type)e.push({type:"text",text:t.text});else if("reasoning"===t.type);else if("tool-call"===t.type);else if("image"===t.type)e.push({type:"image",image:{type:"url",url:t.image}});else throw Error("Unsupported content type");t.push({role:a.role,contents:e})}return t}e.s(["convertMessage",()=>a,"convertMessageDelta",()=>s,"restoreMessages",()=>i])},86444,e=>e.a(async(t,a)=>{try{var r=e.i(20299),s=e.i(41295),i=e.i(69798),n=t([i]);[i]=n.then?(await n)():n;let d=(0,s.createContext)({currentThreadId:"default",setCurrentThreadId:()=>{},threads:new Map,setThreads:()=>{},currentThreadMessages:[],appendThreadMessage:()=>{},renameThread:()=>{},threadListAdapter:{}});function o({children:e}){let[t,a]=(0,s.useState)([{id:"default",status:"regular",title:"New Chat"}]),[n,o]=(0,s.useState)(new Map([["default",[]]])),[l,u]=(0,s.useState)("default"),c=(0,s.useMemo)(()=>n.get(l)??[],[l,n]),{isModelLoading:h,selectedModel:p}=(0,i.useAiloyAgentContext)();return(0,s.useEffect)(()=>{a([{id:"default",status:"regular",title:"New Chat"}]),o(new Map([["default",[]]]))},[p]),(0,r.jsx)(d.Provider,{value:{currentThreadId:l,setCurrentThreadId:u,threads:n,setThreads:o,currentThreadMessages:c,appendThreadMessage:(e,t)=>{o(a=>{let r=new Map(a),s=r.get(e)??[];return r.set(e,[...s,t]),r})},renameThread:(e,t)=>{a(a=>a.map(a=>a.id===e?{...a,title:t}:a))},threadListAdapter:{threadId:l,threads:t,isLoading:h,onSwitchToNewThread:()=>{let e=`thread-${Date.now()}`;a(t=>[...t,{id:e,status:"regular",title:"New Chat"}]),o(t=>new Map(t).set(e,[])),u(e)},onSwitchToThread:e=>{u(e)},onRename:(e,t)=>{a(a=>a.map(a=>a.id===e?{...a,title:t}:a))},onDelete:e=>{a(t=>t.filter(t=>t.id!==e)),o(t=>{let a=new Map(t);return a.delete(e),a}),l===e&&u("default")}}},children:e})}function l(){let e=(0,s.useContext)(d);if(!e)throw Error("useThreadContext must be used within ThreadProvider");return e}e.s(["ThreadProvider",()=>o,"useThreadContext",()=>l]),a()}catch(e){a(e)}},!1),8355,e=>e.a(async(t,a)=>{try{var r=e.i(20299),s=e.i(67530),i=e.i(79269),n=e.i(42571),o=e.i(64001),l=e.i(1673),d=e.i(75939),u=e.i(11639),c=e.i(41295),h=e.i(77536),p=e.i(69798),m=e.i(86444),f=t([u,p,m]);function g({children:e}){let[t,a]=(0,c.useState)(null),[f,g]=(0,c.useState)(!1),{agentInitialized:b,agentRunConfig:v,runAgent:x,systemPrompt:y}=(0,p.useAiloyAgentContext)(),{currentThreadId:_,currentThreadMessages:w,appendThreadMessage:j,renameThread:T,threadListAdapter:M}=(0,m.useThreadContext)();(0,c.useEffect)(()=>(p.agentStreamEventTarget.addEventListener("agent-stream-delta",I),p.agentStreamEventTarget.addEventListener("agent-stream-finished",E),()=>{p.agentStreamEventTarget.removeEventListener("agent-stream-delta",I),p.agentStreamEventTarget.removeEventListener("agent-stream-finished",E)}),[_]);let S=null,I=async e=>{let{delta:t,finish_reason:r}=e.detail;if(S=null===S?t:u.accumulateMessageDelta(S,t),a({...S}),void 0!==r){let e=u.finishMessageDelta(S);j(_,(0,h.convertMessage)(e)),a(null),S=null}},E=()=>{g(!1)},k=(0,c.useCallback)(async e=>{if(!b)throw Error("Agent is not initialized yet");let t=[];if(void 0!==e.attachments){for(let a of e.attachments)if("image"===a.type){let e=await a.file.arrayBuffer(),r=new Uint8Array(e),s=u.imageFromBytes(r);t.push(s)}}if(e.content[0]?.type!=="text")throw Error("Only text messages are supported");t.push({type:"text",text:e.content[0].text});let a={role:"user",contents:t};j(_,(0,h.convertMessage)(a)),0===w.length&&T(_,e.content[0].text.substring(0,30));let r=[...(0,h.restoreMessages)(w),a];""!==y&&(r=[{role:"system",contents:[{type:"text",text:y}]},...r]),x(r,v),g(!0)},[b,_,w,v,y,j,T,x]),C=(0,c.useMemo)(()=>{let e=w;if(null!==t){let a=(0,h.convertMessageDelta)(t);e=[...e,a]}return e},[w,t]),A=(0,d.useExternalStoreRuntime)({isDisabled:!b,isRunning:f,messages:(0,l.useExternalMessageConverter)({messages:C,callback:e=>e,isRunning:f}),onNew:k,adapters:{attachments:new i.CompositeAttachmentAdapter([new n.SimpleImageAttachmentAdapter,new o.SimpleTextAttachmentAdapter]),threadList:M}});return(0,r.jsx)(s.AssistantRuntimeProvider,{runtime:A,children:e})}[u,p,m]=f.then?(await f)():f,e.s(["AiloyRuntimeProvider",()=>g]),a()}catch(e){a(e)}},!1),65993,(e,t,a)=>{t.exports=e.r(47293)},99128,e=>{"use strict";var t=e.i(20299),a=e.i(41295),r=e.i(95980),s="horizontal",i=["horizontal","vertical"],n=a.forwardRef((e,a)=>{var n;let{decorative:o,orientation:l=s,...d}=e,u=(n=l,i.includes(n))?l:s;return(0,t.jsx)(r.Primitive.div,{"data-orientation":u,...o?{role:"none"}:{"aria-orientation":"vertical"===u?u:void 0,role:"separator"},...d,ref:a})});n.displayName="Separator";var o=e.i(7071);function l({className:e,orientation:a="horizontal",decorative:r=!0,...s}){return(0,t.jsx)(n,{"data-slot":"separator",decorative:r,orientation:a,className:(0,o.cn)("shrink-0 bg-border data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...s})}e.s(["Separator",()=>l],99128)},77494,e=>{"use strict";var t=e.i(20299),a=e.i(41295),r=e.i(94331),s=e.i(81471);let i=(0,e.i(71775).default)("panel-left",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]]);var n=e.i(7071),o=e.i(25111);e.i(76586),e.i(99128);var l=e.i(60239),d=e.i(11991);function u({...e}){return(0,t.jsx)(l.Root,{"data-slot":"sheet",...e})}function c({...e}){return(0,t.jsx)(l.Portal,{"data-slot":"sheet-portal",...e})}function h({className:e,...a}){return(0,t.jsx)(l.Overlay,{"data-slot":"sheet-overlay",className:(0,n.cn)("fixed inset-0 z-50 bg-black/50 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:animate-in data-[state=open]:fade-in-0",e),...a})}function p({className:e,children:a,side:r="right",...s}){return(0,t.jsxs)(c,{children:[(0,t.jsx)(h,{}),(0,t.jsxs)(l.Content,{"data-slot":"sheet-content",className:(0,n.cn)("fixed z-50 flex flex-col gap-4 bg-background shadow-lg transition ease-in-out data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:animate-in data-[state=open]:duration-500","right"===r&&"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm","left"===r&&"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm","top"===r&&"inset-x-0 top-0 h-auto border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top","bottom"===r&&"inset-x-0 bottom-0 h-auto border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",e),...s,children:[a,(0,t.jsxs)(l.Close,{className:"absolute top-4 right-4 rounded-xs opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,t.jsx)(d.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function m({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,n.cn)("flex flex-col gap-1.5 p-4",e),...a})}function f({className:e,...a}){return(0,t.jsx)(l.Title,{"data-slot":"sheet-title",className:(0,n.cn)("font-semibold text-foreground",e),...a})}function g({className:e,...a}){return(0,t.jsx)(l.Description,{"data-slot":"sheet-description",className:(0,n.cn)("text-sm text-muted-foreground",e),...a})}var b=e.i(65875);let v=a.createContext(null);function x(){let e=a.useContext(v);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}function y({defaultOpen:e=!0,open:r,onOpenChange:s,className:i,style:o,children:l,...d}){let u=function(){let[e,t]=a.useState(void 0);return a.useEffect(()=>{let e=window.matchMedia("(max-width: 767px)"),a=()=>{t(window.innerWidth<768)};return e.addEventListener("change",a),t(window.innerWidth<768),()=>e.removeEventListener("change",a)},[]),!!e}(),[c,h]=a.useState(!1),[p,m]=a.useState(e),f=r??p,g=a.useCallback(e=>{let t="function"==typeof e?e(f):e;s?s(t):m(t),document.cookie=`sidebar_state=${t}; path=/; max-age=604800`},[s,f]),x=a.useCallback(()=>u?h(e=>!e):g(e=>!e),[u,g,h]);a.useEffect(()=>{let e=e=>{"b"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),x())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[x]);let y=f?"expanded":"collapsed",_=a.useMemo(()=>({state:y,open:f,setOpen:g,isMobile:u,openMobile:c,setOpenMobile:h,toggleSidebar:x}),[y,f,g,u,c,h,x]);return(0,t.jsx)(v.Provider,{value:_,children:(0,t.jsx)(b.TooltipProvider,{delayDuration:0,children:(0,t.jsx)("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3rem",...o},className:(0,n.cn)("group/sidebar-wrapper flex min-h-svh w-full has-data-[variant=inset]:bg-sidebar",i),...d,children:l})})})}function _({side:e="left",variant:a="sidebar",collapsible:r="offcanvas",className:s,children:i,...o}){let{isMobile:l,state:d,openMobile:c,setOpenMobile:h}=x();return"none"===r?(0,t.jsx)("div",{"data-slot":"sidebar",className:(0,n.cn)("flex h-full w-(--sidebar-width) flex-col bg-sidebar text-sidebar-foreground",s),...o,children:i}):l?(0,t.jsx)(u,{open:c,onOpenChange:h,...o,children:(0,t.jsxs)(p,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"w-(--sidebar-width) bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":"18rem"},side:e,children:[(0,t.jsxs)(m,{className:"sr-only",children:[(0,t.jsx)(f,{children:"Sidebar"}),(0,t.jsx)(g,{children:"Displays the mobile sidebar."})]}),(0,t.jsx)("div",{className:"flex h-full w-full flex-col",children:i})]})}):(0,t.jsxs)("div",{className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":"collapsed"===d?r:"","data-variant":a,"data-side":e,"data-slot":"sidebar",children:[(0,t.jsx)("div",{"data-slot":"sidebar-gap",className:(0,n.cn)("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180","floating"===a||"inset"===a?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon)")}),(0,t.jsx)("div",{"data-slot":"sidebar-container",className:(0,n.cn)("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex","left"===e?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]","floating"===a||"inset"===a?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)]":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-data-[side=left]:border-r group-data-[side=right]:border-l",s),...o,children:(0,t.jsx)("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow-sm",children:i})})]})}function w({className:e,onClick:a,...r}){let{toggleSidebar:s}=x();return(0,t.jsxs)(o.Button,{"data-sidebar":"trigger","data-slot":"sidebar-trigger",variant:"ghost",size:"icon",className:(0,n.cn)("size-7",e),onClick:e=>{a?.(e),s()},...r,children:[(0,t.jsx)(i,{}),(0,t.jsx)("span",{className:"sr-only",children:"Toggle Sidebar"})]})}function j({className:e,...a}){let{toggleSidebar:r}=x();return(0,t.jsx)("button",{"data-sidebar":"rail","data-slot":"sidebar-rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:(0,n.cn)("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border sm:flex","in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full hover:group-data-[collapsible=offcanvas]:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",e),...a})}function T({className:e,...a}){return(0,t.jsx)("main",{"data-slot":"sidebar-inset",className:(0,n.cn)("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2",e),...a})}function M({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:(0,n.cn)("flex flex-col gap-2 p-2",e),...a})}function S({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sidebar-footer","data-sidebar":"footer",className:(0,n.cn)("flex flex-col gap-2 p-2",e),...a})}function I({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:(0,n.cn)("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",e),...a})}function E({className:e,...a}){return(0,t.jsx)("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:(0,n.cn)("flex w-full min-w-0 flex-col gap-1",e),...a})}function k({className:e,...a}){return(0,t.jsx)("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:(0,n.cn)("group/menu-item relative",e),...a})}let C=(0,s.cva)("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function A({asChild:e=!1,isActive:a=!1,variant:s="default",size:i="default",tooltip:o,className:l,...d}){let u=e?r.Slot:"button",{isMobile:c,state:h}=x(),p=(0,t.jsx)(u,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":i,"data-active":a,className:(0,n.cn)(C({variant:s,size:i}),l),...d});return o?("string"==typeof o&&(o={children:o}),(0,t.jsxs)(b.Tooltip,{children:[(0,t.jsx)(b.TooltipTrigger,{asChild:!0,children:p}),(0,t.jsx)(b.TooltipContent,{side:"right",align:"center",hidden:"collapsed"!==h||c,...o})]})):p}e.s(["Sidebar",()=>_,"SidebarContent",()=>I,"SidebarFooter",()=>S,"SidebarHeader",()=>M,"SidebarInset",()=>T,"SidebarMenu",()=>E,"SidebarMenuButton",()=>A,"SidebarMenuItem",()=>k,"SidebarProvider",()=>y,"SidebarRail",()=>j,"SidebarTrigger",()=>w,"useSidebar",()=>x],77494)},46827,e=>{"use strict";var t=e.i(20299),a=e.i(71775);let r=(0,a.default)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);var s=e.i(49397),i=e.i(94772),n=e.i(95980),o=e.i(41295),l=e.i(32307),d=(0,o.forwardRef)((e,a)=>{let r=(0,l.useAssistantState)(({threads:e,threadListItem:t})=>e.mainThreadId===t.id);return(0,t.jsx)(n.Primitive.div,{...r?{"data-active":"true","aria-current":"true"}:null,...e,ref:a})});d.displayName="ThreadListItemPrimitive.Root";var u=e.i(64270),c=e.i(32704),h=(0,u.createActionButton)("ThreadListItemPrimitive.Archive",()=>{let e=(0,c.useAssistantApi)();return(0,o.useCallback)(()=>{e.threadListItem().archive()},[e])}),p=(0,u.createActionButton)("ThreadListItemPrimitive.Unarchive",()=>{let e=(0,c.useAssistantApi)();return(0,o.useCallback)(()=>{e.threadListItem().unarchive()},[e])}),m=(0,u.createActionButton)("ThreadListItemPrimitive.Delete",()=>{let e=(0,c.useAssistantApi)();return(0,o.useCallback)(()=>{e.threadListItem().delete()},[e])}),f=(0,u.createActionButton)("ThreadListItemPrimitive.Trigger",()=>{let e=(0,c.useAssistantApi)();return(0,o.useCallback)(()=>{e.threadListItem().switchTo()},[e])}),g=({fallback:e})=>{let a=(0,l.useAssistantState)(({threadListItem:e})=>e.title);return(0,t.jsx)(t.Fragment,{children:a||e})};g.displayName="ThreadListItemPrimitive.Title",e.s([],48084),e.i(48084),e.s(["Archive",()=>h,"Delete",()=>m,"Root",()=>d,"Title",()=>g,"Trigger",()=>f,"Unarchive",()=>p],14434);var b=e.i(14434),b=b,v=e.i(64150),x=(0,o.forwardRef)(({onClick:e,disabled:a,...r},s)=>{let i=(0,l.useAssistantState)(({threads:e})=>e.newThreadId===e.mainThreadId),o=(0,c.useAssistantApi)();return(0,t.jsx)(n.Primitive.button,{type:"button",...i?{"data-active":"true","aria-current":"true"}:null,...r,ref:s,disabled:a,onClick:(0,v.composeEventHandlers)(e,()=>{o.threads().switchToNewThread()})})});x.displayName="ThreadListPrimitive.New";var y=e.i(67586),_=e.i(21918),w=({index:e,archived:a,children:r})=>{let s=(0,c.useAssistantApi)(),i=(0,c.useExtendedAssistantApi)({threadListItem:(0,_.DerivedScope)({source:"threads",query:{type:"index",index:e,archived:a},get:()=>s.threads().item({index:e,archived:a})}),on(t,r){let{event:i,scope:n}=(0,y.normalizeEventSelector)(t);return(0,y.checkEventScope)("thread-list-item",n,i)?s.on({scope:"*",event:i},t=>{t.threadId===s.threads().item({index:e,archived:a}).getState().id&&r(t)}):s.on(t,r)}});return(0,t.jsx)(c.AssistantProvider,{api:i,children:r})},j=(0,o.memo)(({index:e,archived:a=!1,components:r})=>{let s=r.ThreadListItem;return(0,t.jsx)(w,{index:e,archived:a,children:(0,t.jsx)(s,{})})},(e,t)=>e.index===t.index&&e.archived===t.archived&&e.components.ThreadListItem===t.components.ThreadListItem);j.displayName="ThreadListPrimitive.ItemByIndex";var T=({archived:e=!1,components:a})=>{let r=(0,l.useAssistantState)(({threads:t})=>e?t.archivedThreadIds.length:t.threadIds.length);return(0,o.useMemo)(()=>Array.from({length:r},(r,s)=>(0,t.jsx)(j,{index:s,archived:e,components:a},s)),[r,e,a])};T.displayName="ThreadListPrimitive.Items";var M=(0,o.forwardRef)((e,a)=>(0,t.jsx)(n.Primitive.div,{...e,ref:a}));M.displayName="ThreadListPrimitive.Root",e.s([],88100),e.i(88100),e.s(["ItemByIndex",()=>j,"Items",()=>T,"New",()=>x,"Root",()=>M],52088);var S=e.i(52088),S=S,I=e.i(99433),I=I;let E=(0,a.default)("message-square",[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]]);var k=e.i(43831),C=e.i(51515),C=C;let A=(0,a.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);var R=e.i(65993),O=e.i(55429),N=e.i(25111),P=e.i(99128),L=e.i(77494);let z=()=>{let e=(0,R.usePathname)(),a=(0,R.useRouter)(),{setOpenMobile:r}=(0,L.useSidebar)(),s=e=>{r(!1),a.push(e)};return(0,t.jsxs)(S.Root,{className:"aui-root aui-thread-list-root flex flex-col items-stretch gap-1.5",children:[(0,t.jsxs)(N.Button,{variant:"ghost",className:"flex cursor-pointer items-center justify-start gap-1 rounded-lg px-2.5 py-2 text-start hover:bg-muted data-active:bg-muted",onClick:()=>s("/"),children:[(0,t.jsx)(E,{}),"Chat"]}),(0,t.jsxs)(N.Button,{variant:"ghost",className:"flex cursor-pointer items-center justify-start gap-1 rounded-lg px-2.5 py-2 text-start hover:bg-muted data-active:bg-muted",onClick:()=>s("/models"),children:[(0,t.jsx)(I.default,{}),"Models"]}),(0,t.jsxs)(N.Button,{variant:"ghost",className:"flex cursor-pointer items-center justify-start gap-1 rounded-lg px-2.5 py-2 text-start hover:bg-muted data-active:bg-muted",onClick:()=>s("/tools"),children:[(0,t.jsx)(A,{}),"Tools"]}),"/"===e&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Separator,{}),(0,t.jsx)(D,{}),(0,t.jsx)(G,{})]})]})},D=()=>(0,t.jsx)(S.New,{asChild:!0,children:(0,t.jsxs)(N.Button,{className:"aui-thread-list-new flex cursor-pointer items-center justify-start gap-1 rounded-lg px-2.5 py-2 text-start hover:bg-muted data-active:bg-muted",variant:"ghost",children:[(0,t.jsx)(k.PlusIcon,{}),"New Thread"]})}),G=()=>(0,t.jsx)(S.Items,{components:{ThreadListItem:$}}),$=()=>(0,t.jsxs)(b.Root,{className:"aui-thread-list-item flex items-center gap-2 rounded-lg transition-all hover:bg-muted focus-visible:bg-muted focus-visible:ring-2 focus-visible:ring-ring focus-visible:outline-none data-active:bg-muted",children:[(0,t.jsx)(b.Trigger,{className:"aui-thread-list-item-trigger min-w-0 flex-grow cursor-pointer px-3 py-2 text-start",children:(0,t.jsx)(B,{})}),(0,t.jsx)(F,{})]}),B=()=>(0,t.jsx)("span",{className:"aui-thread-list-item-title block max-w-full truncate text-sm",children:(0,t.jsx)(b.Title,{fallback:"New Chat"})}),F=()=>(0,t.jsx)(b.Delete,{asChild:!0,className:"cursor-pointer",children:(0,t.jsx)(O.TooltipIconButton,{className:"aui-thread-list-item-archive mr-3 ml-auto size-4 p-0 text-foreground hover:text-primary",variant:"ghost",tooltip:"Delete thread",children:(0,t.jsx)(C.default,{})})});function H({...e}){return(0,t.jsxs)(L.Sidebar,{...e,children:[(0,t.jsx)(L.SidebarHeader,{className:"aui-sidebar-header mb-2 border-b",children:(0,t.jsx)("div",{className:"aui-sidebar-header-content flex items-center justify-between",children:(0,t.jsx)(L.SidebarMenu,{children:(0,t.jsx)(L.SidebarMenuItem,{children:(0,t.jsx)(L.SidebarMenuButton,{size:"lg",asChild:!0,children:(0,t.jsxs)(i.default,{href:"https://brekkylab.github.io/ailoy",target:"_blank",rel:"noopener noreferrer",children:[(0,t.jsx)(s.default,{src:"https://brekkylab.github.io/ailoy/img/logo.png",width:32,height:32,alt:"logo"}),(0,t.jsx)("div",{className:"aui-sidebar-header-heading mr-6 flex flex-col gap-0.5 leading-none",children:(0,t.jsx)("span",{className:"aui-sidebar-header-title font-semibold",children:"Ailoy Web UI"})})]})})})})})}),(0,t.jsx)(L.SidebarContent,{className:"aui-sidebar-content px-2",children:(0,t.jsx)(z,{})}),(0,t.jsx)(L.SidebarRail,{}),(0,t.jsx)(L.SidebarFooter,{className:"aui-sidebar-footer border-t",children:(0,t.jsx)(L.SidebarMenu,{children:(0,t.jsx)(L.SidebarMenuItem,{children:(0,t.jsx)(L.SidebarMenuButton,{size:"lg",asChild:!0,children:(0,t.jsxs)(i.default,{href:"https://github.com/brekkylab/ailoy-assistant-ui-example",target:"_blank",children:[(0,t.jsx)("div",{className:"aui-sidebar-footer-icon-wrapper flex aspect-square size-8 items-center justify-center rounded-lg bg-sidebar-primary text-sidebar-primary-foreground",children:(0,t.jsx)(r,{className:"aui-sidebar-footer-icon size-4"})}),(0,t.jsxs)("div",{className:"aui-sidebar-footer-heading flex flex-col gap-0.5 leading-none text-gray-600",children:[(0,t.jsxs)("p",{children:["Powered by"," ",(0,t.jsx)("span",{className:"aui-sidebar-footer-title font-bold text-black",children:"Ailoy"})]}),(0,t.jsx)("span",{children:"View Source"})]})]})})})})})]})}e.s(["ThreadListSidebar",()=>H],46827)},38242,e=>e.a(async(t,a)=>{try{var r=e.i(20299),s=e.i(42208),i=e.i(94739),n=e.i(46092),o=e.i(69798),l=e.i(8355),d=e.i(46827),u=e.i(86444),c=e.i(99128),h=e.i(77494),p=t([o,l,u]);function m({children:e}){return(0,r.jsxs)("html",{lang:"en",children:[(0,r.jsx)("body",{className:`${i.default.variable} ${n.default.variable} antialiased`,children:(0,r.jsx)(o.AiloyAgentProvider,{children:(0,r.jsx)(u.ThreadProvider,{children:(0,r.jsx)(l.AiloyRuntimeProvider,{children:(0,r.jsx)(h.SidebarProvider,{children:(0,r.jsxs)("div",{className:"flex h-dvh w-full pr-0.5",children:[(0,r.jsx)(d.ThreadListSidebar,{}),(0,r.jsxs)(h.SidebarInset,{children:[(0,r.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 border-b px-4",children:[(0,r.jsx)(h.SidebarTrigger,{}),(0,r.jsx)(c.Separator,{orientation:"vertical",className:"mr-2 h-4"}),(0,r.jsx)("div",{className:"flex w-full justify-end",children:(0,r.jsx)("a",{href:"https://github.com/brekkylab/ailoy",target:"_blank",rel:"noopener noreferrer",children:(0,r.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/9/91/Octicons-mark-github.svg",width:24,height:24,alt:"ailoy-github"})})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-hidden",children:e})]})]})})})})})}),(0,r.jsx)(s.GoogleAnalytics,{gaId:"G-YD06F47LN4"})]})}[o,l,u]=p.then?(await p)():p,e.s(["default",()=>m]),a()}catch(e){a(e)}},!1)]);